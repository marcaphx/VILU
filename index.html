<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Interface</title>
    <link rel="stylesheet" href="index.css">
</head>


<body>
    <div id="start-overlay"
        style="position:fixed;z-index:9999;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.82);display:flex;align-items:center;justify-content:center;flex-direction:column;">
        <button id="start-btn"
            style="padding:1.2em 3em;font-size:1.3em;border-radius:2em;background:#ffb6d5;color:#fff;border:none;box-shadow:0 2px 24px #ffb6d5;cursor:pointer;transition:background 0.2s;">Start
            & Play Audio</button>
        <p style="color:#fff;margin-top:1.2em;font-size:1.1em;opacity:0.8;">Click to begin and enable music</p>
    </div>
    <div id="typing-text" class="typing" style="margin-top: 1.2rem"></div>
    <div id="typing-text-2" class="typing" style="margin-top: 1.2rem;"></div>
    <div id="typing-text-3" class="typing" style="margin-top: 1.2rem;"></div>
    <div id="typing-text-4" class="typing" style="margin-top: 1.2rem;"></div>
    <div class="main-flex">
        <div id="heart-container" class="heart-svg-container" style="display:none;">
            <canvas id="c" width="600" height="480" style="display:none;"></canvas>
        </div>
        <div id="info-card" class="info-card">
            <h2>Valeria 🦖</h2>
            <p>I mean it.Your beautiful, the way i fell for you was gradual and even i didnt expect falling for you at
                the beginning yet it was across the months we spent together the conversations, your personality, your
                presence is what captivated me.Ever since i moved ive come to miss you so much i miss everything we used
                to do and to be honest everything i come across reminds me of you, ive always thought about the what ifs
                what if she was here, like the other day i was making pins and i know that you wouldve loved making
                that. Till this day i still get nervous or doubt my words everytime we talk and really thats why Ive
                refrained from speaking what was on my mind for months i didnt want to ruin such a beautiful and real
                connection as well as i dont know how you feel but either way i respect it. But anyways this confession
                is not me giving you an ultimatum im just telling you whats on my mind. :]</p>
            <p>PS: Its corny I know</p>
            <p>-Marc <img src="image.png" alt="" style="height:200px; width:200px; object-fit:cover;"></p>
        </div>
    </div>
    <audio id="bg-audio" style="width:340px;max-width:90vw;display:none;">
        <source src="Lazy Afternoons - Yoko Shimomura.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>


    <script>
        const texts = [
            "Been meaning to tell you something...",
            "Was gonna tell you saturday but shiii",
            "Fuck it we ball...",
            "I love you ❤️"
        ];
        const typingDivs = [
            document.getElementById('typing-text'),
            document.getElementById('typing-text-2'),
            document.getElementById('typing-text-3'),
            document.getElementById('typing-text-4')
        ];
        let current = 0;
        let animationStarted = false;
        function typeWriterN(idx) {
            // Start audio as soon as the first typing animation begins
            if (idx === 0) {
                setTimeout(() => {
                    const audio = document.getElementById('bg-audio');
                    const playBtn = document.getElementById('play-audio-btn');
                    if (audio) {
                        audio.style.display = 'block';
                        audio.play().catch(() => {
                            // If autoplay fails, show play button
                            if (playBtn) {
                                playBtn.style.display = 'inline-block';
                                playBtn.onclick = function () {
                                    audio.play();
                                    playBtn.style.display = 'none';
                                };
                            }
                        });
                    }
                }, 10);
            }
            const text = texts[idx];
            const div = typingDivs[idx];
            let i = 0;
            div.textContent = '';
            div.style.display = 'block';
            div.style.borderRight = '3px solid #ffb6d5';
            function typeChar() {
                if (i < text.length) {
                    div.textContent += text.charAt(i);
                    i++;
                    setTimeout(typeChar, 60);
                } else {
                    div.style.borderRight = 'none';
                    setTimeout(() => {
                        div.style.display = 'none';
                        if (idx < texts.length - 1) {
                            typeWriterN(idx + 1);
                        } else {
                            document.getElementById('info-card').style.display = 'block';
                            setTimeout(() => {
                                document.getElementById('heart-container').style.display = 'flex';
                                const canvas = document.getElementById('c');
                                // Make canvas and heart bigger
                                canvas.width = 600;
                                canvas.height = 480;
                                canvas.style.width = '600px';
                                canvas.style.height = '480px';
                                canvas.style.display = 'block';
                                // --- Begin function-heart.js ---
                                let e = [];// trails
                                let h = [];// heart path
                                let O = canvas.width;
                                let Q = canvas.height;
                                let v = 44; // more trails/particles for more chaos
                                let M = Math;
                                let R = M.random;
                                let C = M.cos;
                                let Y = 6.3;
                                let i, x, y, H, S, B, f, k, u, q, D, E, G, T, N;
                                let a = canvas.getContext('2d');
                                // Make heart path bigger
                                for (i = 0; i < Y; i += .16) {
                                    h.push([
                                        O / 2 + 260 * M.pow(M.sin(i), 3),
                                        Q / 2 + 18 * (-(15 * C(i) - 5 * C(2 * i) - 2 * C(3 * i) - C(4 * i)))
                                    ])
                                }
                                i = 0;
                                while (i < v) {
                                    x = R() * O;
                                    y = R() * Q;
                                    H = i / v * 80 + 280;
                                    S = R() * 40 + 60;
                                    B = R() * 60 + 20;
                                    f = [];
                                    k = 0;
                                    while (k < v) {
                                        f[k++] = {
                                            x: x,
                                            y: y,
                                            X: 0,
                                            Y: 0,
                                            R: (1 - k / v) + 1.2,
                                            S: R() * 2.2 + 1.2, // much faster
                                            q: ~~(R() * h.length),
                                            D: i % 2 * 2 - 1,
                                            F: R() * .25 + .65, // more erratic
                                            f: "hsla(" + ~~H + "," + ~~S + "%," + ~~B + "%,.13)"
                                        }
                                    }
                                    e[i++] = f;
                                }
                                function render(_) {
                                    a.fillStyle = _.f;
                                    a.beginPath();
                                    a.arc(_.x, _.y, _.R, 0, Y, 1);
                                    a.closePath();
                                    a.fill();
                                }
                                function loop() {
                                    a.fillStyle = "rgba(0,0,0,0)";
                                    a.clearRect(0, 0, O, Q);
                                    i = v;
                                    while (i--) {
                                        f = e[i];
                                        u = f[0];
                                        q = h[u.q];
                                        D = u.x - q[0];
                                        E = u.y - q[1];
                                        G = M.sqrt((D * D) + (E * E));
                                        if (G < 18) { // more likely to jump
                                            if (R() > .90) {
                                                u.q = ~~(R() * h.length);
                                            } else {
                                                if (R() > .97) u.D *= -1;
                                                u.q += u.D;
                                                u.q %= h.length;
                                                if (u.q < 0) u.q += h.length;
                                            }
                                        }
                                        u.X += -D / G * u.S;
                                        u.Y += -E / G * u.S;
                                        u.x += u.X;
                                        u.y += u.Y;
                                        render(u);
                                        u.X *= u.F;
                                        u.Y *= u.F;
                                        k = 0;
                                        while (k < v - 1) {
                                            T = f[k];
                                            N = f[++k];
                                            N.x -= (N.x - T.x) * .7;
                                            N.y -= (N.y - T.y) * .7;
                                            render(N);
                                        }
                                    }
                                }
                                (function doit() {
                                    requestAnimationFrame(doit);
                                    loop();
                                }());
                                // --- End function-heart.js ---
                            }, 600);
                        }
                    }, 1500);
                }
            }
            typeChar();
        }
        function startExperience() {
            if (animationStarted) return;
            animationStarted = true;
            document.getElementById('start-overlay').style.display = 'none';
            const audio = document.getElementById('bg-audio');
            if (audio) {
                audio.style.display = 'block';
                audio.play().catch(() => { });
            }
            // Start with empty text and trigger animation
            typingDivs.forEach(div => { div.textContent = ''; div.style.display = 'none'; });
            typeWriterN(0);
        }
        document.getElementById('start-btn').onclick = startExperience;
    </script>
</body>

</html>
